{
  "name": "idep-golem-package",
  "version": "1.0.0",
  "description": "Electron wrapper for Golem Shiny app with R.framework bundled",
  "author": "Raghavi C. Janaswamy",
  "main": "main.js",
  "scripts": {
    "start": "electron .",
    "fix-rframework": "bash scripts/pre_build_fix_rframework.sh",
    "build": "electron-builder",
    "dist:mac": "npm run fix-rframework && electron-builder --mac",
    "dist:linux": "npm run build --linux",
    "dist:win": "npm run fix-rframework && electron-builder --win",
    "dist:all": "npm run fix-rframework && electron-builder --win",
    "dist:mac-build": "npm run build --mac",
    "all-build": "npm run fix-rframework && npm run build",
    "post-build-check": "bash scripts/post_build_check.sh",
    "prepack": "bash scripts/prepare_r_framework.sh && bash scripts/verify_sources.sh"
  },
  "dependencies": {
    "cross-spawn": "7.0.6",
    "electron-is-dev": "^2.0.0",
    "start": "^5.1.0",
    "wait-on": "^7.2.0"
  },
  "devDependencies": {
    "electron": "^29.0.0",
    "electron-builder": "^24.0.0"
  },
  "build": {
    "appId": "com.idepGolem",
    "asar": false,
    "files": [
      "main.js",
      "error.html"
    ],    
    "mac": {
      "hardenedRuntime": true,
      "entitlements": "entitlements.mac.plist",
      "entitlementsInherit": "entitlements.mac.plist",
      "gatekeeperAssess": false,      
      "target": ["dmg", "zip"],
      "extraResources": [
        { "from": "resources/R.framework", "to": "R.framework" },
        { "from": "app", "to": "app" }
      ]      
    },
    "win":   { 
      "target": ["nsis", "zip"],
      "extraResources": [ { "from": "resources/R.win", "to": "R.win" }]
    },
    "linux": {
      "target": ["AppImage", "deb", "zip"],
      "extraResources": [
        { "from": "resources/R.linux", "to": "R.linux" }
      ]
      },
    "afterPack": "./scripts/afterPack-prune-lproj.js"
  }
}
